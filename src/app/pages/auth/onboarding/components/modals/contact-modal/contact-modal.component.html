<ion-header>
  <ion-toolbar>
    <ion-title>Información de contacto</ion-title>
    <ion-buttons slot="end">
      <ion-button fill="clear" (click)="dismiss()" class="close-button">
        <ion-icon name="close" slot="icon-only"></ion-icon>
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content>
  <form [formGroup]="contactForm" (ngSubmit)="onSubmit()">
    <div class="content">
      <div class="field" style="gap: 0;">
        <app-custom-input
          textClass="login-label"
          label="Correo electrónico"
          [control]="getControl('email')"
          type="email"
          autocomplete="email"
        >
        </app-custom-input>
        <div class="info-text">
          Este será el medio de comunicación que utilizaremos para contactarte y enviarte notificaciones.
        </div>
      </div>
      <div class="select-country-code">
        <ion-label class="label-input">Código de país</ion-label>
        <ion-select
          formControlName="countryCode"
          interface="action-sheet"
          fill="outline"
          labelPlacement="stacked"
          justify="space-between"
          class="select-input"
          errorText="Campo requerido"
        >
          @for(country of countryCodes; track country.value) {
            <ion-select-option 
              [value]="country.value"
            >
              {{ country.prefix }}
            </ion-select-option>
          }
        </ion-select>
      </div>

      <div class="field-cellphone">
        @if (isAreaCodeRequired()) {
          <app-custom-input
            textClass="login-label"
            label="Código de área"
            [control]="getControl('areaCode')"
            type="tel"
            autocomplete="tel"
            style="width: 35%"
          >
          </app-custom-input>
        }
        <app-custom-input
          textClass="login-label"
          label="Número de teléfono"
          [control]="getControl('phoneNumber')"
          type="tel"
          autocomplete="tel"
          style="width: 100%"
        >
        </app-custom-input>
      </div>

      <div class="submit-section">
        <ion-button
          type="submit"
          expand="block"
          size="large"
          shape="round"
          [disabled]="!contactForm.valid"
          style="width: 30%"
        >
          Guardar
        </ion-button>
      </div>
    </div>
  </form>
</ion-content>
